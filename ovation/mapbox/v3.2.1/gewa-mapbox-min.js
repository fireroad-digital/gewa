"use strict";const token="pk.eyJ1IjoidGltaHNpZWgiLCJhIjoiY2xzdWkxbGp4MDVoMzJqbHFvYWtoaGw4eSJ9.bKE5yaFsALONvh0mRXSONg",sheet="https://docs.google.com/spreadsheets/d/1OjZjaZGoay1VXQeizjwg67A1Soi9q0ra3EVYmH6-9_Q/gviz/tq?tqx=out:csv&sheet=Sheet1";var transformRequest=e=>({url:"api.mapbox.com"===e.slice(8,22)||"tiles.mapbox.com"===e.slice(10,26)?e.replace("?","?pluginName=sheetMapper&"):e});mapboxgl.accessToken=token;var map=new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/streets-v12",center:[-98.5795,39.8283],zoom:4,zoomAnimation:!1,transformRequest:transformRequest}),loaded=!1;$(document).ready((function(){function e(e){map.addLayer({id:"csvData",type:"symbol",source:{type:"geojson",data:e},layout:{"icon-image":"music"}}),map.on("click","csvData",(function(e){let o=e.features[0].geometry.coordinates.slice(),a=e.features[0].properties.Address,t=`https://www.google.com/maps/dir//${encodeURI(a)}`,s=`<h3>${e.features[0].properties.Name}</h3>`;for(s+=`<h4><a target='_blank' href='${t}'>Directions</a></h4>`,s+=`<h4><b>Address:</b> ${a}</h4>`,s+=`<h4><b>Phone:</b> ${e.features[0].properties.Phone}</h4>`;Math.abs(e.lngLat.lng-o[0])>180;)o[0]+=e.lngLat.lng>o[0]?360:-360;(new mapboxgl.Popup).setLngLat(o).setHTML(s).addTo(map)})),map.on("mouseenter","csvData",(function(){map.getCanvas().style.cursor="pointer"})),map.on("mouseleave","places",(function(){map.getCanvas().style.cursor=""}));var o=turf.bbox(e);map.fitBounds(o,{padding:50})}$.ajax({type:"GET",url:sheet,dataType:"text",success:function(o){!function(o){csv2geojson.csv2geojson(o,{latfield:"Latitude",lonfield:"Longitude",delimiter:","},(function(o,a){loaded?e(a):map.on("load",(function(){e(a)}))}))}(o)}}),map.on("load",(function(){loaded=!0}))}));